<!doctype html>
<html lang="hy">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#f9f1d9" />
  <title>Ծննդյան տարեդարձ - Արեգ</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Noto+Sans+Armenian:wght@300;400;600;700&family=Noto+Serif+Armenian:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink:#2a2a2a;
      --muted:#7c6a52;

      --sun-gold:#C9A37E;
      --sun-gold-deep:#B1845F;

      --paper:#ffffffee;
      --bg:#faf8f4;            /* պահում ենք որպես գույնի շերտի գամմա */
      --radius:22px;
      --shadow:0 14px 44px rgba(201,146,18,.12);
      --maxw:980px;
      --hero-offset: 220px;
      --ok:#0a7e3d;
      --warn:#c84a3a;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:"Noto Sans Armenian", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--sun-gold);
      background: transparent;                /* ⬅ ֆոնը թողնում ենք թափանցիկ */
      line-height:1.55;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* ==== FIXED full-site background (stays on scroll) ==== */
    .bg{
      position:fixed; inset:0; z-index:-3; pointer-events:none;
      /* overlay + image (χωρίς background-attachment:fixed) */
      background:
        linear-gradient(rgba(250,248,244,0.28), rgba(250,248,244,0.28)),
        url("assets/sun_hero.png") center / cover no-repeat;
      filter:brightness(1.02) contrast(.98);
      will-change:transform;
    }
    /* ❌ Չկա mobile fallback — միշտ fixed է, բոլոր սարքերում */

    /* ---- Floating dust (gold dots) ---- */
    #dust{
      position:fixed; inset:0; z-index:-2;
      pointer-events:none;
    }

    /* ---- Audio ---- */
    .audio-toggle{
      position:fixed; right:16px; top:calc(12px + env(safe-area-inset-top));
      z-index:10;
      display:flex; align-items:center; justify-content:center;
      width:46px; height:46px;
      border-radius:999px;
      background:#ffffffd8; border:1px solid #efe3c4; box-shadow:var(--shadow);
      cursor:pointer; user-select:none; -webkit-tap-highlight-color:transparent;
      backdrop-filter:saturate(110%) blur(2px);
    }
    .eq{ width:20px; height:16px; display:inline-grid; grid-auto-flow:column; gap:3px; align-items:end; }
    .bar{ width:3px; height:6px; background:var(--sun-gold); border-radius:2px; animation:pause 1s linear infinite; }
    .audio-on .bar:nth-child(1){animation:updown .9s ease-in-out infinite}
    .audio-on .bar:nth-child(2){animation:updown 1.1s ease-in-out infinite .1s}
    .audio-on .bar:nth-child(3){animation:updown .95s ease-in-out infinite .2s}
    @keyframes updown{0%,100%{height:6px}50%{height:16px}}
    @keyframes pause{to{height:6px}}
    @media (max-width:480px){
      .audio-toggle{ right:12px; width:44px; height:44px }
      .eq{ width:18px; height:14px }
    }

    /* ---- HERO ---- */
    header.hero{
      position:relative;
      min-height:92svh;
      padding:calc(var(--hero-offset) + env(safe-area-inset-top)) 16px 56px;
      display:grid; place-items:start center;
    }
    .hero-inner{ width:min(640px, 82vw); margin:0 auto; position:relative; z-index:1 }
    @media (max-width:1024px){ .hero-inner{ width:min(560px, 84vw) } }
    @media (max-width:768px){  .hero-inner{ width:min(520px, 88vw) } }
    @media (max-width:480px){  .hero-inner{ width:min(480px, 90vw) } }

    .sun-corner{
      position:absolute;
      top:clamp(60px, 6vw, 90px);
      right:clamp(12px, 1.8vw, 18px);
      z-index:0;
      pointer-events:none;
      opacity:.95;
      filter:drop-shadow(0 6px 18px rgba(226,161,10,.28));
    }
    .sun-corner img{
      width:clamp(140px, 24vw, 300px);
      height:auto;
      display:block;
    }

    .card{
      background:var(--paper);
      border-radius:20px;
      box-shadow:var(--shadow);
      padding:24px 22px 22px;
      text-align:center;
      border:1px solid rgba(0,0,0,.06);
      backdrop-filter: blur(2px);
      color:var(--sun-gold);
    }

    .subtitle{
      font-family:"Noto Serif Armenian", serif;
      font-size:clamp(16px,2.1vw,19px);
      color:var(--sun-gold);
      letter-spacing:.02em;
      margin:2px 0 8px;
    }
    h1.names{
      font-family:"Noto Serif Armenian", serif !important;
      font-weight:700;
      font-size:clamp(34px,4.6vw,50px);
      letter-spacing:.02em;
      margin:2px 0 8px;
      color:var(--sun-gold);
      text-shadow:0 1px 0 rgba(255,255,255,.35);
    }
    .date{
      font-weight:800;
      letter-spacing:.18em;
      font-size:clamp(18px,2.6vw,22px);
      margin:4px 0 8px;
      color:var(--sun-gold-deep);
    }

    /* Countdown */
    .countdown{
      margin-top:10px;
      display:flex; gap:10px; justify-content:center; flex-wrap:nowrap;
      font-variant-numeric:tabular-nums;
      overflow:hidden;
    }
    .cd-box{
      background:#fff; border:1px solid #eedcc6; border-radius:14px;
      width:92px; padding:10px 8px;
      box-shadow:0 8px 22px rgba(201,146,18,.10);
      color:var(--sun-gold);
    }
    .cd-box b{display:block; font-size:24px; line-height:1; color:var(--sun-gold-deep)}
    .cd-box span{display:block; margin-top:4px; font-size:12px; color:var(--sun-gold); letter-spacing:.08em}
    @media (max-width:480px){
      .countdown{ gap:8px }
      .cd-box{ width:72px; padding:8px 6px; border-radius:12px }
      .cd-box b{ font-size:20px }
      .cd-box span{ font-size:10px }
    }

    /* Slogan */
    .slogan{
      text-align:center;
      margin:14px auto 0;
      font-family:"Cinzel", serif;
      font-weight:900;
      letter-spacing:.16em;
      text-transform:uppercase;
      font-size:clamp(18px,3.6vw,28px);
      color:var(--sun-gold);
      text-shadow:0 1px 0 rgba(255,255,255,.35);
      user-select:none;
    }
    @media (max-width:480px){
      .slogan{ letter-spacing:.12em; font-size:20px }
    }

    .chevron{ margin-top:12px; width:22px; height:22px; opacity:.8; animation:bounce 1.8s infinite; cursor:pointer; fill:var(--sun-gold-deep) }
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(5px)}}
    @media (prefers-reduced-motion:reduce){ .chevron{ animation:none } .audio-toggle, .btn{ transition:none } }

    /* Sections — թափանցիկ, որ bg-ն երևա */
    section{ padding:68px 16px; background:transparent; color:var(--sun-gold) }
    .wrap{max-width:var(--maxw); margin:0 auto}
    .sec-title{
      font-family:"Noto Serif Armenian", serif;
      text-align:center; margin:0 0 8px;
      font-size:clamp(26px,3.2vw,34px);
      color:var(--sun-gold-deep);
      letter-spacing:.02em;
    }
    .time{ text-align:center; font-weight:800; font-size:clamp(22px,2.8vw,26px); margin:10px 0 8px; color:var(--sun-gold-deep) }
    .desc{ text-align:center; color:var(--sun-gold); margin:0 0 22px; font-size:clamp(16px,2vw,18px) }
    @media (max-width:480px){ section{ padding:58px 14px } }

    .emblem{
      width:min(220px,55vw); max-height:180px; object-fit:contain;
      display:block; margin:0 auto 14px; filter:drop-shadow(0 2px 10px rgba(201,146,18,.14))
    }

    .btn{
      display:inline-block; background:#fff;
      color:var(--sun-gold-deep);
      text-decoration:none; font-weight:800;
      padding:14px 22px; border-radius:999px;
      border:1px solid rgba(201,146,18,.36);
      box-shadow:0 10px 24px rgba(226,161,10,.18);
      transition:transform .15s ease, box-shadow .15s ease, background .15s ease, color .15s ease;
    }
    .btn:hover{
      transform:translateY(-2px);
      box-shadow:0 16px 30px rgba(226,161,10,.28);
      background:#fff;
      color:#9f711f;
    }
    @media (max-width:480px){ .btn{ padding:12px 18px; font-size:14px } }

    /* RSVP box */
    .rsvp{
      width:min(720px, 92vw); background:#ffffffee; border:1px solid #edd8c3; border-radius:16px; box-shadow:var(--shadow); margin:24px auto 0; padding:18px;
      color:var(--sun-gold);
    }
    .r-line{height:1px; background:#edd8c3; margin:14px 0 10px}
    .field{margin:10px 0}
    label{display:block; margin:4px 0 8px; font-weight:700; color:var(--sun-gold-deep)}
    input[type="text"], input[type="tel"]{
      width:100%; border:1px solid #e9d4bf; border-radius:12px; padding:12px 14px; font-size:16px; outline:none; color:#6e553e
    }
    input[type="text"]::placeholder, input[type="tel"]::placeholder{ color:#bfa58e }
    input[type="text"]:focus, input[type="tel"]:focus{ border-color:#e7c39e; box-shadow:0 0 0 4px rgba(231,195,158,.35) }
    .radio{display:flex; gap:18px; align-items:center; flex-wrap:wrap}
    .submit-row{display:flex; justify-content:center; margin-top:14px}

    /* banners */
    .banner{
      width:min(720px, 92vw); margin:12px auto 0; padding:12px 14px; border-radius:12px; border:1px solid transparent; text-align:center; font-weight:600
    }
    .banner.ok{ background:#eaf6ee; border-color:#cfe9d8; color:var(--ok) }
    .banner.warn{ background:#fff1ef; border-color:#ffd9d3; color:var(--warn) }

    /* Footer */
    footer{
      padding:46px 16px 80px;
      text-align:center;
      color:var(--sun-gold);
      font-family:"Noto Serif Armenian", serif;
      background:transparent;
    }
    footer a.link{ color:var(--sun-gold-deep); text-decoration:none; border-bottom:1px dashed rgba(201,146,18,.45) }
    footer a.link:hover{ color:#8a6308; border-bottom-color:transparent }

    .closing{
      font-size:24px;
      font-weight:700;
      margin-bottom:10px;
      color:var(--sun-gold-deep);
    }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>
  <canvas id="dust" aria-hidden="true"></canvas>

  <!-- HERO top-right sun -->
  <header class="hero" id="home">
    <div class="sun-corner" aria-hidden="true">
      <img src="assets/sun_corner.png" alt="" loading="lazy" decoding="async">
    </div>

    <!-- Audio -->
    <button id="audioBtn" class="audio-toggle" type="button" aria-pressed="false" aria-label="Թողարկել/կանգնեցնել երաժշտությունը">
      <div class="eq"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
    </button>
    <audio id="bgm" src="assets/music.mp3" preload="auto" loop></audio>

    <div class="hero-inner">
      <div class="card">
        <div class="subtitle">Հարգելի հյուրեր սիրով հրավիրում ենք ձեզ մեր բալիկի ծննդյան տարեդարձին</div>
        <h1 class="names">Արեգ</h1>
        <div class="date">16․11․2025</div>

        <div class="countdown" id="countdown">
          <div class="cd-box"><b>—</b><span>ՕՐ</span></div>
          <div class="cd-box"><b>—</b><span>ԺԱՄ</span></div>
          <div class="cd-box"><b>—</b><span>ՐՈՊԵ</span></div>
          <div class="cd-box"><b>—</b><span>ՎՐԿ</span></div>
        </div>

        <!-- chevron to reception -->
        <svg class="chevron" id="toReception" viewBox="0 0 24 24" aria-label="Սքրոլ դեպի սրահ" role="button" tabindex="0">
          <path d="M6.7 8.7a1 1 0 0 1 1.4 0L12 12.6l3.9-3.9a1 1 0 1 1 1.4 1.4l-4.6 4.6a1 1 0 0 1-1.4 0L6.7 10.1a1 1 0 0 1 0-1.4z"/>
        </svg>
      </div>

      <!-- SLOGAN directly under card -->
      <div class="slogan" aria-label="Here Comes The Sun">HERE COMES THE SUN</div>
    </div>
  </header>

  <!-- Reception -->
  <section id="reception">
    <div class="wrap">
      <img class="emblem" src="assets/hall_sketch.png" alt="Սրահի գծանկար" loading="lazy" decoding="async">
      <h2 class="sec-title">Restaurant</h2>
      <div class="time">Ժամը՝ 17:00</div>
      <p class="desc"><b>Ք․ Երևան Felice </b> հանդիսությունների սրահում</p>
      <p style="text-align:center">
        <a class="btn" href="https://www.google.com/maps/place/Felice/@40.1920409,44.5877592,673m/data=!3m2!1e3!4b1!4m6!3m5!1s0x406aa37fd593340b:0x1e39da4638bbd314!8m2!3d40.1920409!4d44.5877592!16s%2Fg%2F11q3srh0py?entry=ttu&g_ep=EgoyMDI1MDkyNC4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener">Քարտեզ</a>
      </p>
    </div>
  </section>

  <!-- RSVP -->
  <section id="rsvp">
    <div class="wrap">
      <h2 class="sec-title">Ձեր ներկայությունը մեզ համար շատ կարևոր է</h2>
      <p class="desc">Խնդրում ենք հաստատել ձեր ներկայությունը մինչև նոյեմբերի 1-ը</p>

      <div id="sentBanner" class="banner ok" style="display:none">✅ Շնորհակալ ենք՝ ձեր պատասխանը առաքվեց։ Կտեսնենք էլ․ փոստում։</div>
      <div id="warnBanner" class="banner warn" style="display:none">⚠️ Խնդրում ենք լրացնել բոլոր դաշտերը ճիշտ ձևաչափով։</div>

      <form id="rsvpForm" class="rsvp" method="POST" target="_self">
        <input type="hidden" name="_subject" value="RSVP • Արեգ">
        <input type="hidden" name="_template" value="table">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" id="nextUrl" name="_next" value="">
        <input type="text" name="_honey" style="display:none">

        <div class="field">
          <label for="name">Ձեր անուն, ազգանուն</label>
          <input id="name" type="text" name="Անուն Ազգանուն" placeholder="օր.՝ Աննա Կարապետյան" required>
        </div>
        <div class="field">
          <label for="phone">Հյուրերի քանակ</label>
          <input id="phone" type="tel" name="Հյուրերի քանակ" inputmode="numeric" pattern="[0-9]{1,3}" placeholder="օր․՝ 5" required>
        </div>

        <div class="r-line"></div>

        <div class="field">
          <span style="display:block; font-weight:700; margin:4px 0 6px">Կկարողանա՞ք ներկա լինել</span>
          <div class="radio">
            <label><input type="radio" name="Մասնակցություն" value="Այո, կմասնակցեմ" required> Այո, կմասնակցեմ</label>
            <label><input type="radio" name="Մասնակցություն" value="Ցավոք, ոչ"> Ցավոք, ոչ</label>
          </div>
        </div>

        <div class="submit-row">
          <button class="btn" type="submit">Ուղարկել</button>
        </div>
      </form>
    </div>
  </section>

  <footer>
    <div class="wrap">
      <p class="closing">Սիրով, <b>Արման և Ասյա Դանիելյաններ</b></p>
      <p style="margin-top:6px; font-size:14px">
        Amelise Invite • © 2025
        • <a href="tel:+37498433250" class="link">Զանգ</a>
        • <a href="https://wa.me/37498433250" target="_blank" rel="noopener" class="link">WhatsApp</a>
        • <a href="https://instagram.com/amelise.invite" target="_blank" rel="noopener" class="link">Instagram</a>
      </p>
    </div>
  </footer>

  <script>
    /* ===================== CONFIG ===================== */
    const RECIPIENT_EMAIL = "asyanersesyan1997@gmail.com";
    /* ================================================= */

    const form = document.getElementById('rsvpForm');
    form.action = "https://formsubmit.co/" + encodeURIComponent(RECIPIENT_EMAIL);

    const next = document.getElementById('nextUrl');
    const here = location.origin + location.pathname + "?sent=1#rsvp";
    next.value = here;

    const params = new URLSearchParams(location.search);
    if (params.get("sent") === "1") {
      document.getElementById('sentBanner').style.display = "block";
      setTimeout(()=> document.getElementById('rsvp').scrollIntoView({behavior:'smooth', block:'start'}), 150);
      history.replaceState({}, "", location.pathname + "#rsvp");
    }

    form.addEventListener('submit', (e)=>{
      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      if(!name || !phone){
        e.preventDefault();
        document.getElementById('warnBanner').style.display = "block";
        setTimeout(()=> document.getElementById('warnBanner').style.display="none", 3000);
      }
    });

    // Countdown
    const target = new Date("2025-11-16T16:30:00+04:00").getTime();
    const boxes = document.querySelectorAll('#countdown .cd-box b');
    function tick(){
      const now = Date.now();
      let diff = Math.max(0, target - now);
      const d = Math.floor(diff / 86400000); diff -= d*86400000;
      const h = Math.floor(diff / 3600000);  diff -= h*3600000;
      const m = Math.floor(diff / 60000);    diff -= m*60000;
      const s = Math.floor(diff / 1000);
      boxes[0].textContent = d;
      boxes[1].textContent = String(h).padStart(2,'0');
      boxes[2].textContent = String(m).padStart(2,'0');
      boxes[3].textContent = String(s).padStart(2,'0');
    }
    tick(); setInterval(tick, 1000);

    // Smooth scroll -> reception
    const chev = document.getElementById('toReception');
    const go = () => document.getElementById('reception')?.scrollIntoView({behavior:'smooth', block:'start'});
    chev?.addEventListener('click', go);
    chev?.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') go(); });

    // Audio control
    const audio = document.getElementById('bgm');
    const btn = document.getElementById('audioBtn');
    async function playAudio(){
      try{ await audio.play(); btn.classList.add('audio-on'); btn.setAttribute('aria-pressed','true'); }
      catch(e){ /* gesture needed */ }
    }
    function pauseAudio(){
      audio.pause(); btn.classList.remove('audio-on'); btn.setAttribute('aria-pressed','false');
    }
    btn.addEventListener('click', async () => { if(audio.paused){ await playAudio(); } else { pauseAudio(); } });

    const prime = () => {
      playAudio();
      window.removeEventListener('pointerdown', prime);
      window.removeEventListener('keydown', prime);
      window.removeEventListener('scroll', prime);
    };
    window.addEventListener('pointerdown', prime, {once:true});
    window.addEventListener('keydown', prime, {once:true});
    window.addEventListener('scroll', prime, {once:true});
    document.addEventListener('visibilitychange', ()=>{ if(document.hidden) pauseAudio(); });

    /* ===================== GOLD DUST ANIMATION ===================== */
    (function(){
      const cvs = document.getElementById('dust');
      const ctx = cvs.getContext('2d');
      let W, H, DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      let particles = [];
      const COUNT_PER_100KPX = 0.18; // խտություն

      function resize(){
        W = cvs.clientWidth = window.innerWidth;
        H = cvs.clientHeight = window.innerHeight;
        cvs.width = Math.floor(W * DPR);
        cvs.height = Math.floor(H * DPR);
        ctx.setTransform(DPR,0,0,DPR,0,0);
        makeParticles();
      }

      function makeParticles(){
        const targetCount = Math.floor(W * H / 100000 * (COUNT_PER_100KPX * 100));
        particles = new Array(targetCount).fill(0).map(()=>({
          x: Math.random()*W,
          y: Math.random()*H,
          r: Math.random()*1.6 + 0.5,
          a: Math.random()*0.55 + 0.25,
          v: Math.random()*0.25 + 0.05,
          drift: (Math.random()*0.4 - 0.2),
        }));
      }

      function draw(){
        ctx.clearRect(0,0,W,H);
        const tmp = getComputedStyle(document.documentElement).getPropertyValue('--sun-gold').trim() || '#C9A37E';
        ctx.fillStyle = tmp;
        particles.forEach(p=>{
          p.y -= p.v;
          p.x += p.drift*0.3;
          if(p.y < -4){ p.y = H + 4; p.x = Math.random()*W; }
          if(p.x < -4) p.x = W+4; if(p.x > W+4) p.x = -4;

          ctx.globalAlpha = p.a;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          ctx.fill();
        });
        ctx.globalAlpha = 1;
        requestAnimationFrame(draw);
      }

      window.addEventListener('resize', resize);
      resize(); draw();
    })();
  </script>
</body>
</html>
